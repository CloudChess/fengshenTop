"use strict";const e=require("../../common/vendor.js"),s={data:()=>({username:"用户名",classArr:[{keyname:"emp_workshop",name:"工段",value:[{tag:"炼胶",ischecked:!1},{tag:"压出",ischecked:!1},{tag:"成型",ischecked:!1},{tag:"硫化",ischecked:!1},{tag:"叉车",ischecked:!1},{tag:"成品",ischecked:!1}]},{keyname:"emp_position",name:"岗位",value:[{tag:"保全",ischecked:!1},{tag:"设备管理员",ischecked:!1},{tag:"设备主管",ischecked:!1}]},{keyname:"emp_job_type",name:"工种",value:[{tag:"钳工",ischecked:!1},{tag:"电工",ischecked:!1},{tag:"焊工",ischecked:!1}]},{keyname:"emp_edution",name:"学历",value:[{tag:"初中",ischecked:!1},{tag:"中专",ischecked:!1},{tag:"高中",ischecked:!1},{tag:"大专",ischecked:!1},{tag:"本科",ischecked:!1},{tag:"小学",ischecked:!1},{tag:"中技",ischecked:!1},{tag:"技校",ischecked:!1}]},{keyname:"emp_skill_level",name:"专业等级",value:[{tag:"无",ischecked:!1},{tag:"技师",ischecked:!1},{tag:"中级工",ischecked:!1},{tag:"高级工",ischecked:!1}]}],classNum:0,searchInput:"",searchInfo:[],teaminfo:[],showinfo:[]}),methods:{toDetail(s){e.index.navigateTo({url:"/pages/teaminfoDetail/teaminfoDetail?pid="+s})},showClassfiy(){this.$refs.ShowClassfiy.open()},showOrder(){this.$refs.ShowOrder.open()},searchHandle(){this.searchInput.trim()?(this.searchInfo=[],this.searchInfo=this.teaminfo.filter((e=>{let s=!1;return e.emp_name.includes(this.searchInput)&&(s=!0),e.emp_position.includes(this.searchInput)&&(s=!0),e.emp_workshop.includes(this.searchInput)&&(s=!0),s}))):this.searchInfo=this.teaminfo},tagHandle(e,s){let t=this.classArr[e],a=t.keyname,i=t.value[s],n=i.tag,c=!i.ischecked;if(this.classArr[e].value[s].ischecked=c,c){this.classNum||this.searchInput||(this.searchInfo=[]);let e=[];e=this.teaminfo.filter((e=>{if(e[a].includes(n)){let s=!0;return this.searchInfo.some((t=>{if(t==e)return s=!1,!0})),s}})),this.classNum++,this.searchInfo.push(...e)}else this.searchInfo=this.searchInfo.filter((e=>!e[a].includes(n))),this.classNum>0&&this.classNum--,this.classNum||(this.searchInfo=this.teaminfo)},getTeamInfo(){let s=e.index.getStorageSync("token"),t=e.index.getStorageSync("username");e.index.request({url:"http://www.fengji.com:90/getteaminfo.php",method:"POST",header:{Authorization:"Bearer "+s},data:{username:t},success:e=>{e.data.data&&(this.teaminfo=e.data.data,this.searchInfo=this.teaminfo)}})}},mounted(){this.getTeamInfo()}};if(!Array){(e.resolveComponent("MyHeader")+e.resolveComponent("uni-section")+e.resolveComponent("uni-drawer"))()}Math||((()=>"../../components/MyHeader/MyHeader.js")+(()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../uni_modules/uni-drawer/components/uni-drawer/uni-drawer.js"))();const t=e._export_sfc(s,[["render",function(s,t,a,i,n,c){return e.e({a:e.p({title:"团队信息"}),b:e.o(((...e)=>c.showClassfiy&&c.showClassfiy(...e))),c:e.o((e=>c.searchHandle())),d:n.searchInput,e:e.o((e=>n.searchInput=e.detail.value)),f:e.o(((...e)=>c.showOrder&&c.showOrder(...e))),g:0==n.teaminfo.length},(0==n.teaminfo.length||n.searchInfo.length,{}),{h:0==n.searchInfo.length,i:e.f(n.searchInfo,((s,t,a)=>({a:e.t(s.emp_name),b:e.t(s.emp_job_type),c:e.t(s.emp_workshop),d:e.o((e=>c.toDetail(s.empid)))}))),j:e.f(n.classArr,((s,t,a)=>({a:e.f(s.value,((s,a,i)=>({a:e.t(s.tag),b:s.ischecked?1:"",c:e.o((e=>c.tagHandle(t,a)))}))),b:"55495325-2-"+a+",55495325-1",c:e.p({title:s.name,type:"line"})}))),k:e.sr("ShowClassfiy","55495325-1"),l:e.o((e=>s.siftHandle(e))),m:e.sr("ShowOrder","55495325-3"),n:e.p({mode:"right"})})}]]);wx.createPage(t);
