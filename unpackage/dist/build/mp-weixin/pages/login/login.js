"use strict";const e=require("../../common/vendor.js"),s={data:()=>({username:"",password:""}),methods:{handleLogin(){/^[\u4e00-\u9fff]{2,5}$/.test(this.username)?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&.])[A-Za-z\d@$!%*?&.x]{8,13}$/.test(this.password)?this.LoginAPI():e.index.showToast({title:"密码输入错误",icon:"none"}):e.index.showToast({title:"请输入正确的用户名",icon:"none"})},navigateToRegister(){e.index.navigateTo({url:"/pages/register/register"})},async LoginAPI(){try{const s="http://www.fengji.com:90/login.php",t=await e.index.request({url:s,method:"POST",data:{username:this.username,password:this.password}});if(t.data){"success"==t.data.status?(e.index.setStorageSync("username",this.username),e.index.setStorageSync("token",t.data.token),this.username="",this.password="",e.index.showToast({title:"登陆成功",icon:"success"}),e.index.navigateTo({url:"/pages/index/index"})):e.index.showToast({title:t.data.errMsg,icon:"none"})}else e.index.showToast({title:"登陆失败: "+t.errMsg,icon:"none",duration:2e3})}catch(s){e.index.showToast({title:"登陆时发生错误",icon:"none",duration:2e3})}}}};const t=e._export_sfc(s,[["render",function(s,t,a,n,o,i){return{a:o.username,b:e.o((e=>o.username=e.detail.value)),c:o.password,d:e.o((e=>o.password=e.detail.value)),e:e.o(((...e)=>i.handleLogin&&i.handleLogin(...e))),f:e.o(((...e)=>i.navigateToRegister&&i.navigateToRegister(...e)))}}],["__scopeId","data-v-d54e337a"]]);wx.createPage(t);
