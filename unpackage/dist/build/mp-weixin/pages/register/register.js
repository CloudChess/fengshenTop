"use strict";const e=require("../../common/vendor.js"),s={data:()=>({username:"",password:"",repassword:"",section:"",position:""}),methods:{handleBackLogin(){e.index.navigateTo({url:"/pages/login/login"})},handleRegister(){let s=/^[\u4e00-\u9fa5]{2,5}$/;/^[\u4e00-\u9fff]{2,5}$/.test(this.username)?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&.])[A-Za-z\d@$!%*?&.x]{8,13}$/.test(this.password)?this.password!=this.repassword?e.index.showToast({title:"两次密码不一致",icon:"fail"}):s.test(this.section)?s.test(this.position)?this.registerUser():e.index.showToast({title:"请输入正确的岗位",icon:"fail"}):e.index.showToast({title:"请输入正确的工段",icon:"fail"}):e.index.showToast({title:"密码为8-13位，包含大写字母、小写字母、数字和符号",icon:"fail"}):e.index.showToast({title:"用户名应为2-5位汉字",icon:"fail"})},navigateToRegister(){e.index.navigateTo({url:"/pages/register/register"})},async registerUser(){const s=await e.index.request({url:"http://127.0.0.1:90/register.php",method:"POST",data:{username:this.username,password:this.password,section:this.section,position:this.position}});if(s.data){"success"==s.data.status?(this.username="",this.password="",this.section="",this.position="",console.log("123456"),e.index.showToast({title:"注册成功",icon:"success"}),e.index.navigateTo({url:"/pages/login/login"})):e.index.showToast({title:s.data.message,icon:"none"})}else e.index.showToast({title:"注册失败: "+s.message,icon:"none",duration:2e3})}}};const t=e._export_sfc(s,[["render",function(s,t,i,o,a,n){return{a:a.username,b:e.o((e=>a.username=e.detail.value)),c:a.password,d:e.o((e=>a.password=e.detail.value)),e:a.repassword,f:e.o((e=>a.repassword=e.detail.value)),g:a.section,h:e.o((e=>a.section=e.detail.value)),i:a.position,j:e.o((e=>a.position=e.detail.value)),k:e.o(((...e)=>n.handleRegister&&n.handleRegister(...e))),l:e.o((e=>n.handleBackLogin()))}}],["__scopeId","data-v-08514966"]]);wx.createPage(t);
