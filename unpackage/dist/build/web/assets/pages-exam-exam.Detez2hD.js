import{_ as e,o as a,c as t,w as s,p as i,b as l,j as d,d as r,t as n,q as c,u as o,v as u,i as m,f as h,n as p,k as x,l as f,r as _,m as k,g,x as b,F as y,I as C}from"./index-BmSdLlR2.js";import{_ as v}from"./MyHeader.DeBaNa5e.js";import{r as S}from"./uni-app.es.YhHd3PI_.js";import{_ as E}from"./MyBottom.CcLQBUlQ.js";const F=e({name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick(e){this.$emit("click",e)}}},[["render",function(e,p,x,f,_,k){const g=u,b=m,y=h;return a(),t(b,{class:o(["uni-card",{"uni-card--full":x.isFull,"uni-card--shadow":x.isShadow,"uni-card--border":x.border}]),style:c({margin:x.isFull?0:x.margin,padding:x.spacing,"box-shadow":x.isShadow?x.shadow:""})},{default:s((()=>[i(e.$slots,"cover",{},(()=>[x.cover?(a(),t(b,{key:0,class:"uni-card__cover"},{default:s((()=>[l(g,{class:"uni-card__cover-image",mode:"widthFix",onClick:p[0]||(p[0]=e=>k.onClick("cover")),src:x.cover},null,8,["src"])])),_:1})):d("",!0)]),!0),i(e.$slots,"title",{},(()=>[x.title||x.extra?(a(),t(b,{key:0,class:"uni-card__header"},{default:s((()=>[l(b,{class:"uni-card__header-box",onClick:p[1]||(p[1]=e=>k.onClick("title"))},{default:s((()=>[x.thumbnail?(a(),t(b,{key:0,class:"uni-card__header-avatar"},{default:s((()=>[l(g,{class:"uni-card__header-avatar-image",src:x.thumbnail,mode:"aspectFit"},null,8,["src"])])),_:1})):d("",!0),l(b,{class:"uni-card__header-content"},{default:s((()=>[l(y,{class:"uni-card__header-content-title uni-ellipsis"},{default:s((()=>[r(n(x.title),1)])),_:1}),x.title&&x.subTitle?(a(),t(y,{key:0,class:"uni-card__header-content-subtitle uni-ellipsis"},{default:s((()=>[r(n(x.subTitle),1)])),_:1})):d("",!0)])),_:1})])),_:1}),l(b,{class:"uni-card__header-extra",onClick:p[2]||(p[2]=e=>k.onClick("extra"))},{default:s((()=>[l(y,{class:"uni-card__header-extra-text"},{default:s((()=>[r(n(x.extra),1)])),_:1})])),_:1})])),_:1})):d("",!0)]),!0),l(b,{class:"uni-card__content",style:c({padding:x.padding}),onClick:p[3]||(p[3]=e=>k.onClick("content"))},{default:s((()=>[i(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),l(b,{class:"uni-card__actions",onClick:p[4]||(p[4]=e=>k.onClick("actions"))},{default:s((()=>[i(e.$slots,"actions",{},void 0,!0)])),_:3})])),_:3},8,["class","style"])}],["__scopeId","data-v-b4135a35"]]);const P=e({data:()=>({username:"",searchInput:"",exams:[],showModules:[]}),computed:{examlist(){return this.searchInput?this.exams.filter((e=>{if(e.examName.includes(this.searchInput))return e})):this.exams}},methods:{alterExam(e){p({url:"/pages/addexam/addexam?eid="+e})},delExam(e){x({content:"确认删除考试？",success:a=>{if(a.confirm){let a=f("username"),t=f("token");_({url:"http://10.72.59.63:90/delExam.php",method:"POST",header:{Authorization:"Bearer "+t},data:{username:a,eid:e},success:a=>{if(a.data&&a.data.status&&"success"==a.data.status)for(let t=0;t<this.exams.length;t++)if(this.exams[t].eid==e)return void this.exams.splice(t,1)}})}}})},handleBack(){p({url:"/pages/index/index"})},toPaper(e,a){p({url:"/pages/exampaper/exampaper?isFinished="+a+"&eid="+e,events:{FinishExam:this.getExams}})},toPage(e){p({url:e,events:{FinishPost:this.getExams}})},toMark(e){p({url:"/pages/markPaper/markPaper?eid="+e})},surePermisson(){let e=f("username"),a=f("token");_({url:"http://10.72.59.63:90/surePermisson.php",method:"POST",header:{Authorization:"Bearer "+a},data:{username:e,page:"examlist"},success:e=>{e.data&&e.data.moudle&&(this.showModules=e.data.moudle)}})},getExams(){let e=f("username"),a=f("token");_({url:"http://10.72.59.63:90/getExams.php",method:"POST",header:{Authorization:"Bearer "+a},data:{username:e},success:e=>{if(e.data&&"success"==e.data.status){let a=e.data.exams,t=e.data.uExamsInfo;a&&t&&a.forEach((e=>{t.forEach((a=>{e.eid==a.eid&&(e.isFinished=a.isFinished,e.objScore=a.objScore,e.subScore=a.subScore)}))})),this.exams=a}}})}},onLoad(){this.username=f("username")},mounted(){this.getExams(),this.surePermisson()}},[["render",function(e,i,n,c,o,u){const p=S(k("MyHeader"),v),x=m,f=C,_=h,P=S(k("uni-card"),F),w=S(k("MyBottom"),E);return a(),t(x,{class:"content"},{default:s((()=>[l(p,{title:"考试列表"}),l(x,{class:"searchNav"},{default:s((()=>[l(x,{class:"searchNav-blank"}),l(x,{class:"exam-searchNav-container"},{default:s((()=>[o.showModules.includes("addExam")?(a(),t(x,{key:0,class:"searchNav-btn",style:{"background-color":"#5555ff"},onClick:i[0]||(i[0]=e=>u.toPage("/pages/addexam/addexam"))},{default:s((()=>[r("新增")])),_:1})):d("",!0),l(f,{class:"searchNav-input",modelValue:o.searchInput,"onUpdate:modelValue":i[1]||(i[1]=e=>o.searchInput=e),type:"text",onConfirm:i[2]||(i[2]=a=>e.searchHandle()),"confirm-type":"search"},null,8,["modelValue"])])),_:1})])),_:1}),l(x,{class:"main-list"},{default:s((()=>[u.examlist[0]?d("",!0):(a(),t(x,{key:0,class:"no-exam"},{default:s((()=>[r("未找到相关考试")])),_:1})),(a(!0),g(y,null,b(u.examlist,((e,i)=>(a(),t(x,{class:"item-box"},{default:s((()=>[o.showModules.includes("markPaper")?(a(),t(x,{key:0,class:"adminList"},{default:s((()=>[l(P,{title:e.examName,"sub-title":e.eCreateTime},{actions:s((()=>[l(x,{class:"card-actions"},{default:s((()=>[l(x,{class:"card-actions-item actionBtn-check",onClick:a=>u.toMark(e.eid)},{default:s((()=>[l(_,{class:"card-actions-item-text"},{default:s((()=>[r("阅卷")])),_:1})])),_:2},1032,["onClick"]),l(x,{class:"card-actions-item actionBtn-alter",onClick:a=>u.alterExam(e.eid)},{default:s((()=>[l(_,{class:"card-actions-item-text"},{default:s((()=>[r("修改")])),_:1})])),_:2},1032,["onClick"]),l(x,{class:"card-actions-item actionBtn-del",onClick:a=>u.delExam(e.eid)},{default:s((()=>[l(_,{class:"card-actions-item-text"},{default:s((()=>[r("删除")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["title","sub-title"])])),_:2},1024)):(a(),t(x,{key:1,class:"nomList"},{default:s((()=>["已完成"==e.isFinished?(a(),t(P,{key:0,title:e.examName,"sub-title":e.eCreateTime,extra:"分数："+(e.subScore+e.objScore),onClick:a=>u.toPaper(e.eid,e.isFinished)},null,8,["title","sub-title","extra","onClick"])):(a(),t(P,{key:1,title:e.examName,"sub-title":e.eCreateTime,extra:e.isFinished,onClick:a=>u.toPaper(e.eid,e.isFinished)},null,8,["title","sub-title","extra","onClick"]))])),_:2},1024))])),_:2},1024)))),256))])),_:1}),l(w)])),_:1})}],["__scopeId","data-v-24b46ab6"]]);export{P as default};
