import{_ as e,s as a,n as s,r as t,a as n,o,c as i,w as l,i as r,b as d,d as u,I as c,e as m,f as p}from"./index-BmSdLlR2.js";const f=e({data:()=>({username:"",password:""}),methods:{handleLogin(){/^[\u4e00-\u9fff]{2,5}$/.test(this.username)?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&.])[A-Za-z\d@$!%*?&.x]{8,13}$/.test(this.password)?this.LoginAPI():a({title:"密码输入错误",icon:"none"}):a({title:"请输入正确的用户名",icon:"none"})},navigateToRegister(){s({url:"/pages/register/register"})},async LoginAPI(){try{const e="http://10.72.59.63:90/login.php",o=await t({url:e,method:"POST",data:{username:this.username,password:this.password}});if(o.data){"success"==o.data.status?(n("username",this.username),n("token",o.data.token),this.username="",this.password="",a({title:"登陆成功",icon:"success"}),s({url:"/pages/index/index"})):a({title:o.data.errMsg,icon:"none"})}else a({title:"登陆失败: "+o.errMsg,icon:"none",duration:2e3})}catch(e){a({title:"登陆时发生错误",icon:"none",duration:2e3})}}}},[["render",function(e,a,s,t,n,f){const h=c,g=r,w=m,_=p;return o(),i(g,{class:"container"},{default:l((()=>[d(g,{class:"form-container"},{default:l((()=>[d(g,{class:"form-item"},{default:l((()=>[d(h,{type:"text",modelValue:n.username,"onUpdate:modelValue":a[0]||(a[0]=e=>n.username=e),placeholder:"用户名"},null,8,["modelValue"])])),_:1}),d(g,{class:"form-item"},{default:l((()=>[d(h,{type:"password",modelValue:n.password,"onUpdate:modelValue":a[1]||(a[1]=e=>n.password=e),placeholder:"密码"},null,8,["modelValue"])])),_:1}),d(w,{onClick:f.handleLogin},{default:l((()=>[u("登录")])),_:1},8,["onClick"]),d(_,{class:"register-link",onClick:f.navigateToRegister},{default:l((()=>[u("还没有账号？去注册")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-70049397"]]);export{f as default};
