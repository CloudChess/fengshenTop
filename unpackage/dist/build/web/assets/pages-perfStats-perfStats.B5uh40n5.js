import{_ as e,n as t,l as a,r as l,m as s,o as r,c as o,w as c,i as f,b as p,d as u,j as i,g as n,x as d,F as m,t as h}from"./index-BmSdLlR2.js";import{_}from"./MyHeader.DeBaNa5e.js";import{r as b}from"./uni-app.es.YhHd3PI_.js";import{_ as g}from"./uni-data-picker.UVAqS254.js";import{_ as S}from"./MyBottom.CcLQBUlQ.js";import"./uni-cloud.es.DjwZVFm8.js";const T=e({data:()=>({perfDate:0,selectDate:[],perfinfo:[]}),methods:{changeHandle(e){this.getPrefStauts()},creatDateTree(e){let t=[];for(let a=e;a<=e+3;a++){let e={text:a,value:a};t.push(e)}this.selectDate=t},toStruct(e){t({url:"/pages/teamStruct/teamStruct?team="+e+"&year="+this.perfDate})},unscramblePerf(e){if("object"==typeof e){let t=[];e.map((e=>{let a=!1;t.forEach((t=>{t.month==e.month&&(a=!0,t.group.push({perfteam:e.emp_team,perfCoefficient:e.emp_perf}))})),a||t.push({month:e.month,group:[{perfteam:e.emp_team,perfCoefficient:e.emp_perf}]})})),this.perfinfo=t}},getPrefStauts(){let e=a("token"),t=a("username");l({url:"http://10.72.59.63:90/getprefstauts.php",method:"POST",header:{Authorization:"Bearer "+e},data:{username:t,year:this.perfDate},success:e=>{e.data&&e.data.data?this.unscramblePerf(e.data.data):this.perfinfo=[]}})}},mounted(){this.creatDateTree(2024);let e=(new Date).getFullYear();this.perfDate=e,this.getPrefStauts()}},[["render",function(e,t,a,l,T,D){const k=b(s("MyHeader"),_),y=b(s("uni-data-picker"),g),C=f,j=b(s("MyBottom"),S);return r(),o(C,{class:"perfStats"},{default:c((()=>[p(k,{title:"绩效统计"}),p(y,{placeholder:"选择年份",modelValue:T.perfDate,"onUpdate:modelValue":t[0]||(t[0]=e=>T.perfDate=e),localdata:T.selectDate,onChange:D.changeHandle,preload:!0},null,8,["modelValue","localdata","onChange"]),p(C,{class:"picker-blank"}),p(C,{class:"perfStats-container"},{default:c((()=>[p(C,{class:"perTable"},{default:c((()=>[p(C,{class:"perTable-title"},{default:c((()=>[p(C,{class:"perTable-title-cell",style:{"font-weight":"bold"}},{default:c((()=>[u(">")])),_:1}),p(C,{class:"perTable-title-cell",onClick:t[1]||(t[1]=e=>D.toStruct("炼胶"))},{default:c((()=>[u("炼胶")])),_:1}),p(C,{class:"perTable-title-cell",onClick:t[2]||(t[2]=e=>D.toStruct("压出"))},{default:c((()=>[u("压出")])),_:1}),p(C,{class:"perTable-title-cell",onClick:t[3]||(t[3]=e=>D.toStruct("成型"))},{default:c((()=>[u("成型")])),_:1}),p(C,{class:"perTable-title-cell",onClick:t[4]||(t[4]=e=>D.toStruct("硫化"))},{default:c((()=>[u("硫化")])),_:1}),p(C,{class:"perTable-title-cell",onClick:t[5]||(t[5]=e=>D.toStruct("辅助"))},{default:c((()=>[u("辅助")])),_:1})])),_:1}),T.perfinfo[0]?i("",!0):(r(),o(C,{key:0,class:"perTable-null"},{default:c((()=>[u("本年无数据")])),_:1})),(r(!0),n(m,null,d(T.perfinfo,((e,t)=>(r(),o(C,{class:"perTable-row"},{default:c((()=>[p(C,{class:"tableKey"},{default:c((()=>[u(h(e.month)+"月",1)])),_:2},1024),(r(!0),n(m,null,d(e.group,((e,t)=>(r(),o(C,{class:"tableValue"},{default:c((()=>[u(h(e.perfCoefficient),1)])),_:2},1024)))),256))])),_:2},1024)))),256))])),_:1})])),_:1}),p(j)])),_:1})}],["__scopeId","data-v-482d5a2a"]]);export{T as default};
