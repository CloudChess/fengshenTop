import{_ as e,n as s,l as a,r as t,m as i,o as c,c as l,w as n,i as h,b as o,d as r,j as d,g as u,x as m,F as f,f as k,I as p,S as _,t as g,u as y}from"./index-BmSdLlR2.js";import{_ as I}from"./MyHeader.DeBaNa5e.js";import{r as v}from"./uni-app.es.YhHd3PI_.js";import{_ as w}from"./MyBottom.CcLQBUlQ.js";import{_ as C}from"./uni-section.Da37xVUa.js";import{_ as N}from"./uni-drawer.B-Z5BQXI.js";const j=e({data:()=>({username:"用户名",classArr:[{keyname:"emp_workshop",name:"工段",value:[{tag:"炼胶",ischecked:!1},{tag:"压出",ischecked:!1},{tag:"成型",ischecked:!1},{tag:"硫化",ischecked:!1},{tag:"叉车",ischecked:!1},{tag:"成品",ischecked:!1}]},{keyname:"emp_position",name:"岗位",value:[{tag:"保全",ischecked:!1},{tag:"设备管理员",ischecked:!1},{tag:"设备主管",ischecked:!1}]},{keyname:"emp_job_type",name:"工种",value:[{tag:"钳工",ischecked:!1},{tag:"电工",ischecked:!1},{tag:"焊工",ischecked:!1}]},{keyname:"emp_edution",name:"学历",value:[{tag:"初中",ischecked:!1},{tag:"中专",ischecked:!1},{tag:"高中",ischecked:!1},{tag:"大专",ischecked:!1},{tag:"本科",ischecked:!1},{tag:"小学",ischecked:!1},{tag:"中技",ischecked:!1},{tag:"技校",ischecked:!1}]},{keyname:"emp_skill_level",name:"专业等级",value:[{tag:"无",ischecked:!1},{tag:"技师",ischecked:!1},{tag:"中级工",ischecked:!1},{tag:"高级工",ischecked:!1}]}],classNum:0,searchInput:"",searchInfo:[],teaminfo:[],showinfo:[]}),methods:{toDetail(e){s({url:"/pages/teaminfoDetail/teaminfoDetail?pid="+e+"&to=2"})},showClassfiy(){this.$refs.ShowClassfiy.open()},showOrder(){this.$refs.ShowOrder.open()},searchHandle(){this.searchInput.trim()?(this.searchInfo=[],this.searchInfo=this.teaminfo.filter((e=>{let s=!1;return e.emp_name.includes(this.searchInput)&&(s=!0),e.emp_position.includes(this.searchInput)&&(s=!0),e.emp_workshop.includes(this.searchInput)&&(s=!0),s}))):this.searchInfo=this.teaminfo},tagHandle(e,s){let a=this.classArr[e],t=a.keyname,i=a.value[s],c=i.tag,l=!i.ischecked;if(this.classArr[e].value[s].ischecked=l,l){this.classNum||this.searchInput||(this.searchInfo=[]);let e=[];e=this.teaminfo.filter((e=>{if(e[t].includes(c)){let s=!0;return this.searchInfo.some((a=>{if(a==e)return s=!1,!0})),s}})),this.classNum++,this.searchInfo.push(...e)}else this.searchInfo=this.searchInfo.filter((e=>!e[t].includes(c))),this.classNum>0&&this.classNum--,this.classNum||(this.searchInfo=this.teaminfo)},getTeamInfo(){let e=a("token"),s=a("username");t({url:"http://10.72.59.63:90/getteaminfo.php",method:"POST",header:{Authorization:"Bearer "+e},data:{username:s},success:e=>{e.data.data&&(this.teaminfo=e.data.data,this.searchInfo=this.teaminfo)}})}},mounted(){this.getTeamInfo()}},[["render",function(e,s,a,t,j,H){const S=v(i("MyHeader"),I),b=h,A=k,O=p,x=v(i("MyBottom"),w),D=v(i("uni-section"),C),M=_,T=v(i("uni-drawer"),N);return c(),l(b,{class:"teamInfo"},{default:n((()=>[o(S,{title:"团队信息"}),o(b,{class:"stepNav"},{default:n((()=>[o(b)])),_:1}),o(b,{class:"searchNav"},{default:n((()=>[o(b,{class:"searchNav-blank"}),o(b,{class:"searchNav-container"},{default:n((()=>[o(A,{class:"searchNav-classify",onClick:H.showClassfiy},{default:n((()=>[r("筛选")])),_:1},8,["onClick"]),o(O,{class:"searchNav-input",modelValue:j.searchInput,"onUpdate:modelValue":s[0]||(s[0]=e=>j.searchInput=e),type:"text",onConfirm:s[1]||(s[1]=e=>H.searchHandle()),"confirm-type":"search"},null,8,["modelValue"]),o(A,{class:"searchNav-order",onClick:H.showOrder},{default:n((()=>[r("排序")])),_:1},8,["onClick"])])),_:1})])),_:1}),o(b,{class:"infoList"},{default:n((()=>[0==j.teaminfo.length?(c(),l(b,{key:0,class:"list-nodata"},{default:n((()=>[r("加载中")])),_:1})):0==j.searchInfo.length?(c(),l(b,{key:1,class:"list-nodata"},{default:n((()=>[r("无检索结果")])),_:1})):d("",!0),(c(!0),u(f,null,m(j.searchInfo,((e,s)=>(c(),l(b,{class:"list-item",onClick:s=>H.toDetail(e.empid)},{default:n((()=>[o(A,{class:"item-name"},{default:n((()=>[r(g(e.emp_name),1)])),_:2},1024),o(A,{class:"item-postion"},{default:n((()=>[r(g(e.emp_job_type),1)])),_:2},1024),o(A,{class:"item-section"},{default:n((()=>[r(g(e.emp_workshop),1)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1}),o(x),o(T,{ref:"ShowClassfiy"},{default:n((()=>[o(b,{class:"drawer-blank"}),o(M,{style:{height:"100%"},"scroll-y":"true"},{default:n((()=>[o(b,null,{default:n((()=>[(c(!0),u(f,null,m(j.classArr,((e,s)=>(c(),l(D,{title:e.name,type:"line"},{default:n((()=>[o(b,{class:"classfiy-section"},{default:n((()=>[(c(!0),u(f,null,m(e.value,((e,a)=>(c(),l(b,{class:y(["classfiyTag",{tagChecked:e.ischecked}]),onClick:e=>H.tagHandle(s,a)},{default:n((()=>[r(g(e.tag),1)])),_:2},1032,["class","onClick"])))),256))])),_:2},1024)])),_:2},1032,["title"])))),256))])),_:1})])),_:1})])),_:1},512),o(T,{ref:"ShowOrder",mode:"right"},{default:n((()=>[o(M,{style:{height:"100%"},"scroll-y":"true"},{default:n((()=>[o(b)])),_:1})])),_:1},512)])),_:1})}],["__scopeId","data-v-9cfce728"]]);export{j as default};
