import{_ as e,o as s,c as t,w as a,p as o,af as l,ag as n,L as i,l as r,r as u,k as c,m as d,i as h,b as f,g as p,x as m,F as w,d as _,t as g,u as S,j as k,I as q,f as x,e as P,X as y,q as I,Y as T,h as Q}from"./index-BmSdLlR2.js";import{r as O}from"./uni-app.es.YhHd3PI_.js";const B=e({name:"MyTransition",data:()=>({hooks:{css:!1,onBeforeEnter(e){e.style.transition="height 0.5s ease",e.style.height=0},onEnter(e,s){e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},onAfterEnter(e){e.style.height=e.scrollHeight+"px"},onBeforeLeave(e){e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},onLeave(e,s){0!==e.scrollHeight&&(e.style.transition="height 0.5s ease",e.style.height=0)},onAfterLeave(e){e.style.transition=""}}})},[["render",function(e,i,r,u,c,d){return s(),t(n,l({name:"my-transition"},c.hooks),{default:a((()=>[o(e.$slots,"default")])),_:3},16)}]]);const C=e({data:()=>({eid:null,team:[],questions:[],examInfo:{},searchTxt:"",groupShow:{"炼胶":!1,"压出":!1,"成型":!1,"硫化":!1,"辅助":!1},subShowStyle:"",nowPerson:{},indexOfGroup:null,scoreOfNowPerson:{},everyScore:[],theInputScore:0,nowQtype:"全部",QtypeClassTags:["全部","单选","多选","判断","填空","简答","画图"],showQlistMethod:!1}),computed:{showQuestions(){if(this.questions){if("全部"==this.nowQtype)return this.questions;{let e=[];return this.questions.forEach((s=>{s.qtype==this.nowQtype&&e.push(s)})),e}}},groupTeam(){if(this.team){let e={"炼胶":[],"压出":[],"成型":[],"硫化":[],"辅助":[]};return this.team.forEach((s=>{this.everyScore.length&&this.everyScore.forEach((e=>{e.pid==s.empid&&(s.totalScore=e.objScore+e.subScore)})),e[s.emp_workshop]&&e[s.emp_workshop].push(s)})),e}},searchTeam(){if(this.searchTxt){let e=[];return this.team.forEach((s=>{s.emp_name.includes(this.searchTxt)&&e.push(s)})),e}}},methods:{changeNowQtype(e){this.nowQtype=e,this.questions.forEach((e=>{e.now=!1})),this.showQuestions[0].now=!0},togQlistShowMethod(){this.showQlistMethod=!this.showQlistMethod},exitPaper(){i()},alterNowQuestion(e){e>=0&&(this.questions.forEach((e=>{e.now=!1})),this.questions[e].now=!0)},setNowPerson(e,s){if(e)this.indexOfGroup=this.groupTeam[e.emp_workshop].indexOf(e),this.nowPerson=e,this.getQuestions(e.empid),this.getPersonScoreM();else if(s&&this.indexOfGroup+s>0){let e=this.nowPerson.emp_workshop;this.nowPerson=this.groupTeam[e][this.indexOfGroup+s],this.indexOfGroup=this.groupTeam[e].indexOf(this.nowPerson),this.getQuestions(this.nowPerson.empid),this.getPersonScoreM()}},showSub(e){this.groupShow[e]=!this.groupShow[e]},getTeam(){let e=r("username"),s=r("token");u({url:"http://10.72.59.63:90/getteaminfo.php",method:"POST",header:{Authorization:"Bearer "+s},data:{username:e},success:e=>{e.data&&e.data.data&&(this.team=e.data.data)}})},getQuestions(e){this.questions=[];let s=r("username"),t=r("token");u({url:"http://10.72.59.63:90/getSubQuestions.php",method:"POST",header:{Authorization:"Bearer "+t},data:{username:s,eid:this.eid,pid:e},success:e=>{if(e.data&&e.data.questions){let s=e.data.questions;s.forEach((e=>{e.now=!1})),this.questions=s.reverse(),this.questions[0].now=!0}}})},beforeInput(e){this.theInputScore=e.detail.value},subScore(e,s,t){let a=e.detail.value;if(a&&a>=0&&a<=t){let e=a-this.theInputScore;this.scoreOfNowPerson.subScore+=e,this.groupTeam[this.nowPerson.emp_workshop][this.indexOfGroup].totalScore+=e,this.theInputScore=a;let t=r("username"),o=r("token");u({url:"http://10.72.59.63:90/subScore.php",method:"POST",header:{Authorization:"Bearer "+o},data:{username:t,eid:this.eid,pid:this.nowPerson.empid,qid:s,uscore:a},success:e=>{e.data&&e.data.status&&"fail"==e.data.status&&c({content:"修改分数失败(服务器错误)\n该信息相关："+this.nowPerson.emp_name})}})}else a&&c({content:"分数不合法，请注意分值范围"})},getPersonScoreM(){this.scoreOfNowPerson={};let e=r("username"),s=r("token");u({url:"http://10.72.59.63:90/getSingleScore.php",method:"POST",header:{Authorization:"Bearer "+s},data:{username:e,eid:this.eid,pid:this.nowPerson.empid},success:e=>{e.data&&e.data.data&&(this.scoreOfNowPerson=e.data.data)}})},getExamInfo(){let e=r("username"),s=r("token");u({url:"http://10.72.59.63:90/getSingleExam.php",method:"POST",header:{Authorization:"Bearer "+s},data:{username:e,eid:this.eid},success:e=>{e.data&&e.data.data&&(this.examInfo=e.data.data)}})},getOneByOneScore(){let e=r("username"),s=r("token");u({url:"http://10.72.59.63:90/getPeopleScore.php",method:"POST",header:{Authorization:"Bearer "+s},data:{username:e,eid:this.eid},success:e=>{e.data&&e.data.data&&(this.everyScore=e.data.data)}})}},onLoad(e){this.eid=e.eid,this.getExamInfo(),this.getTeam(),this.getExamInfo(),this.getOneByOneScore()}},[["render",function(e,o,l,n,i,r){const u=h,c=q,C=x,N=O(d("MyTransition"),B),b=P;return s(),t(u,{class:"markPaper"},{default:a((()=>[f(u,{class:"markPaperBg"}),f(u,{class:"markPaper-container"},{default:a((()=>[f(u,{class:"left sideWith"},{default:a((()=>[f(u,{class:"left-team whiteBlock"},{default:a((()=>[f(u,{class:"search"},{default:a((()=>[f(c,{class:"searchInput",type:"text",placeholder:"人员搜索","placeholder-style":"color:#d6d6d6;",modelValue:i.searchTxt,"onUpdate:modelValue":o[0]||(o[0]=e=>i.searchTxt=e)},null,8,["modelValue"])])),_:1}),f(u,{class:"searchResBox"},{default:a((()=>[(s(!0),p(w,null,m(r.searchTeam,((e,o)=>(s(),t(u,{class:"searchRes-item",onClick:s=>r.setNowPerson(e)},{default:a((()=>[_(g(e.emp_name),1)])),_:2},1032,["onClick"])))),256))])),_:1}),f(u,{class:"teamBox"},{default:a((()=>[f(u,{class:"teamBox-title"},{default:a((()=>[f(u,{class:"icon-point"}),f(C,null,{default:a((()=>[_("考试人员")])),_:1})])),_:1}),f(u,{class:"teamMenu"},{default:a((()=>[(s(!0),p(w,null,m(r.groupTeam,((e,o)=>(s(),t(u,{class:"Menu"},{default:a((()=>[f(u,{class:"GroupTitle",onClick:e=>r.showSub(o)},{default:a((()=>[f(C,{class:"Title-txt"},{default:a((()=>[_(g(o),1)])),_:2},1024),f(C,{class:"Title-txt"})])),_:2},1032,["onClick"]),f(N,null,{default:a((()=>[y(f(u,{class:"subMenu",style:I(i.subShowStyle)},{default:a((()=>[(s(!0),p(w,null,m(e,((e,o)=>(s(),t(u,{class:S(["subMenu-item",{isNowPerson:e==i.nowPerson}]),onClick:s=>r.setNowPerson(e)},{default:a((()=>[f(C,{class:"left-empName"},{default:a((()=>[_(g(e.emp_name),1)])),_:2},1024),e.totalScore?(s(),t(C,{key:0,class:"left-empTotalScore"},{default:a((()=>[_("分数："+g(e.totalScore),1)])),_:2},1024)):k("",!0)])),_:2},1032,["onClick","class"])))),256))])),_:2},1032,["style"]),[[T,i.groupShow[o]]])])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1}),f(u,{class:"mid midWidth"},{default:a((()=>[f(u,{class:"personInfo whiteBlock marginBottom10"},{default:a((()=>[f(C,{class:"pName"},{default:a((()=>[_("姓名："+g(i.nowPerson.emp_name),1)])),_:1}),f(C,{class:"pWorkshop"},{default:a((()=>[_("工段："+g(i.nowPerson.emp_workshop),1)])),_:1}),f(C,{class:"pObjScore"},{default:a((()=>[_("客观题分数："+g(i.scoreOfNowPerson.objScore||0),1)])),_:1}),f(C,{class:"pSubScore"},{default:a((()=>[_("主观题分数："+g(i.scoreOfNowPerson.subScore||0),1)])),_:1}),f(C,{class:"pTotalScore"},{default:a((()=>[_("总分："+g(i.scoreOfNowPerson.objScore+i.scoreOfNowPerson.subScore||0),1)])),_:1})])),_:1}),f(u,{class:"qList whiteBlock marginBottom10"},{default:a((()=>[f(u,{class:"qListOpera"},{default:a((()=>[f(u,{class:"qListOpera-left"},{default:a((()=>[f(u,{class:"classTags"},{default:a((()=>[(s(!0),p(w,null,m(i.QtypeClassTags,(e=>(s(),t(u,{class:S(["qListClassTag",{isQtypeSelect:i.nowQtype==e}]),onClick:s=>r.changeNowQtype(e)},{default:a((()=>[_(g(e),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1}),f(u,{class:"qListOpera-right"},{default:a((()=>[f(u,{class:"togQlistMethod",onClick:o[1]||(o[1]=e=>i.showQlistMethod=!i.showQlistMethod)},{default:a((()=>[f(u,{class:"togSlider"},{default:a((()=>[f(u,{class:"sliderBox"},{default:a((()=>[f(u,{class:S(["sliderDiv",{sliderDivRight:i.showQlistMethod}])},null,8,["class"])])),_:1})])),_:1}),f(C,{class:"togDesTag"},{default:a((()=>[_("题号")])),_:1})])),_:1})])),_:1})])),_:1}),f(u,{class:"qListItems"},{default:a((()=>[(s(!0),p(w,null,m(r.showQuestions,((e,o)=>y((s(),t(u,{class:"qListItem"},{default:a((()=>[f(u,{class:S(["qListItem-txt",{nowOrder:e.now}]),onClick:e=>r.alterNowQuestion(o)},{default:a((()=>[_(g(o+1),1)])),_:2},1032,["class","onClick"])])),_:2},1536)),[[T,!i.showQlistMethod]]))),256)),(s(!0),p(w,null,m(r.showQuestions,((e,o)=>y((s(),t(u,{class:"qListItem"},{default:a((()=>[f(u,{class:S(["qListItem-txt",{nowOrder:e.now}]),onClick:e=>r.alterNowQuestion(o)},{default:a((()=>[_(g(i.questions.indexOf(e)+1),1)])),_:2},1032,["class","onClick"])])),_:2},1536)),[[T,i.showQlistMethod]]))),256))])),_:1})])),_:1}),i.questions.length&&r.showQuestions.length?k("",!0):(s(),t(u,{key:0,class:"noQuestionInfo whiteBlock"},{default:a((()=>[_("暂无考试记录")])),_:1})),i.questions.length?(s(),t(u,{key:1,class:"questionBox whiteBlock"},{default:a((()=>[(s(!0),p(w,null,m(i.questions,((e,l)=>(s(),t(u,{class:"questionInfo-for"},{default:a((()=>[y(f(u,{class:"questionPanel"},{default:a((()=>[f(u,{class:"questionInfo"},{default:a((()=>[f(u,{class:"qOrder qInfoItem"},{default:a((()=>[f(u,{class:"questionTag"},{default:a((()=>[_("序号：")])),_:1}),f(u,{class:"questionContent"},{default:a((()=>[_(g(l+1),1)])),_:2},1024),f(u,{class:"questionPreScore"},{default:a((()=>[_("(分值："+g(e.score)+")",1)])),_:2},1024)])),_:2},1024),f(u,{class:"qTitle qInfoItem"},{default:a((()=>[f(u,{class:"questionTag"},{default:a((()=>[_("题目：")])),_:1}),f(u,{class:"questionContent"},{default:a((()=>[_(g(e.title),1)])),_:2},1024)])),_:2},1024),f(u,{class:"qUanswer qInfoItem"},{default:a((()=>[f(u,{class:"questionTag"},{default:a((()=>[_("解答：")])),_:1}),f(u,{class:"questionContent"},{default:a((()=>[f(u,{class:"qUanswer-shortT"},{default:a((()=>[_(g(e.uanswer),1)])),_:2},1024),"画图"==e.qtype?(s(),t(u,{key:0,class:"qUanswer-draw"},{default:a((()=>[Q("img",{src:"http://10.72.59.63:90/"+e.drawImg},null,8,["src"])])),_:2},1024)):k("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(u,{class:"qInputs"},{default:a((()=>[f(u,{class:"alterPersonBtns"},{default:a((()=>[f(b,{class:"prePersonBtn",onClick:o[2]||(o[2]=e=>r.setNowPerson(null,-1))},{default:a((()=>[_("上一人")])),_:1}),f(b,{class:"nextPersonBtn",onClick:o[3]||(o[3]=e=>r.setNowPerson(null,1))},{default:a((()=>[_("下一人")])),_:1})])),_:1}),f(u,{class:"markBtns"},{default:a((()=>[f(b,{class:"preQuestionBtn",onClick:e=>r.alterNowQuestion(l-1)},{default:a((()=>[_("上一题")])),_:2},1032,["onClick"]),f(u,{class:"scoreInputs"},{default:a((()=>[f(C,{class:"scoreInput-tag"},{default:a((()=>[_("分数：")])),_:1}),f(c,{class:"scoreInput",type:"number",modelValue:e.uscore,"onUpdate:modelValue":s=>e.uscore=s,onFocus:r.beforeInput,onInput:s=>r.subScore(s,e.qid,e.score)},null,8,["modelValue","onUpdate:modelValue","onFocus","onInput"])])),_:2},1024),f(b,{class:"nextQuestionBtn",onClick:e=>r.alterNowQuestion(l+1)},{default:a((()=>[_("下一题")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1536),[[T,e.now]])])),_:2},1024)))),256))])),_:1})):k("",!0)])),_:1}),f(u,{class:"right sideWith"},{default:a((()=>[f(u,{class:"right-examInfo whiteBlock"},{default:a((()=>[f(u,{class:"examInfo-title"},{default:a((()=>[f(C,{class:"examName"},{default:a((()=>[_(g(i.examInfo.examName),1)])),_:1}),f(C,null,{default:a((()=>[_(g(i.examInfo.eCreateTime),1)])),_:1}),f(C,null,{default:a((()=>[_("已考："+g(i.examInfo.joinNum)+"人",1)])),_:1})])),_:1})])),_:1}),f(u,{class:"right-btns whiteBlock"},{default:a((()=>[f(u,{class:"pageBtns"},{default:a((()=>[f(b,{class:"exitBtn",onClick:r.exitPaper},{default:a((()=>[_("退出阅卷")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-4826406b"]]);export{C as default};
